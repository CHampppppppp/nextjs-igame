// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  engineType = "binary"
}

datasource db {
  provider = "postgresql"
}

// 记忆文档表 - 存储 AI 记忆系统相关的文档和向量数据
model MemoryDocument {
  id          String   @id @default(cuid())
  title       String   @db.VarChar(500)
  content     String   @db.Text
  type        String   @db.VarChar(100) // 文件类型 (pdf, txt, md等)
  fileName    String?  @db.VarChar(500) // 原始文件名
  chunkIndex  Int      @default(0) // 分块索引
  totalChunks Int      @default(1) // 总块数
  pineconeId  String   @unique @db.VarChar(200) // Pinecone向量ID
  status      Status   @default(active) // 文档状态
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  @@map("memory_documents")
}

// 学生信息表 - 存储学生个人信息和自我介绍
model Student {
  id           String   @id @db.VarChar(100) // 学生ID（基于英文名生成）
  chineseName  String   @db.VarChar(100) // 中文名
  englishName  String?  @db.VarChar(200) // 英文名
  grade        String   @db.VarChar(50) // 年级（如：2023级硕士、2024级博士）
  degree       String   @db.VarChar(50) // 学位（如：硕士研究生、博士研究生）
  research     String?  @db.VarChar(500) // 研究方向
  bio          String?  @db.Text // 自我介绍
  email        String?  @db.VarChar(200) // 邮箱
  phone        String?  @db.VarChar(20) // 电话
  avatar       String?  @db.VarChar(500) // 头像URL
  github       String?  @db.VarChar(500) // GitHub链接
  linkedin     String?  @db.VarChar(500) // LinkedIn链接
  website      String?  @db.VarChar(500) // 个人网站
  skills       String?  @db.Text // 技能
  interests    String?  @db.Text // 兴趣爱好
  publications String?  @db.Text // 发表论文/项目
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  @@map("students")
}

// 枚举类型
enum Status {
  active
  deleted
}
